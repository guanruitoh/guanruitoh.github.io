<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You!</title>

    <!-- Add Firebase scripts -->
    <script defer src="https://www.gstatic.com/firebasejs/9.6.3/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.6.3/firebase-database.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.6.3/firebase-analytics.js"></script>

    <!-- Add JsBarcode library -->
    <script defer src="https://cdn.jsdelivr.net/jsbarcode/3.11.0/JsBarcode.all.min.js"></script>

    <!-- Your Firebase configuration and initialization code -->
    <script defer>
        // Import the necessary functions from the Firebase SDK
        import { initializeApp } from "firebase/app";
        import { getDatabase, ref, set } from "firebase/database";

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            measurementId: "YOUR_MEASUREMENT_ID"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Function to generate a random barcode and store it in Firebase
        function generateAndStoreBarcode() {
            var randomBarcode = Math.floor(Math.random() * 900000000) + 100000000;

            // Store the generated barcode in Firebase
            set(ref(database, 'barcodes'), {
                barcode: randomBarcode
            }).then(() => {
                console.log('Barcode stored successfully:', randomBarcode);

                // Display the stored barcode on the SVG
                JsBarcode("#barcodeSvg", randomBarcode.toString(), { format: "CODE128" });
            }).catch((error) => {
                console.error('Error storing barcode:', error);
            });
        }

        // Generate and store the barcode when the page loads
        window.onload = function() {
            generateAndStoreBarcode();
        };
    </script>
</head>
<body>

    <header>
        <h1>THANK YOU!</h1>
    </header>

    <div>
        <svg id="barcodeSvg"></svg>
        <p>Thank you for your purchase! Please come back again!</p>
    </div>
</body>
</html>
